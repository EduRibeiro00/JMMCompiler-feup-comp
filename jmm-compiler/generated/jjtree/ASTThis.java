import exceptions.SemanticParseException;
import java.util.HashSet;
import java.util.List;
import java.util.BitSet;

/* Generated By:JJTree: Do not edit this line. ASTThis.java Version 6.1 */
/* JavaCCOptions:MULTI=true,NODE_USES_PARSER=true,VISITOR=false,TRACK_TOKENS=true,NODE_PREFIX=AST,NODE_EXTENDS=,NODE_FACTORY=,SUPPORT_CLASS_VISIBILITY_PUBLIC=true */
public class ASTThis extends SimpleNode {
    public ASTThis(int id) {
        super(id);
    }

    public ASTThis(Parser p, int id) {
        super(p, id);
    }

    @Override
    public String analyze(Descriptor descriptor, HashSet<String> variables) {
        MethodDescriptor md = (MethodDescriptor) descriptor;

        if (md.isStatic()) {
            this.parser.handleSemanticError(new SemanticParseException("Can't use this in a static method."), this);
        }

        this.returnType = ((MethodDescriptor) descriptor).getParentClass().getIdentifier();
        return this.returnType;
    }

    @Override
    public void generateCode(Descriptor descriptor) {

        parser.addInstruction(new JVMInstruction("aload_0",1));
    }

    public void generateCFGNode(BitSet useNode, BitSet defNode, boolean varDef, MethodDescriptor mDescriptor) {
        useNode.set(0);
    }
}
/*
 * JavaCC - OriginalChecksum=728294d74c2f257e83152a0cbbd5d63b (do not edit this
 * line)
 */
